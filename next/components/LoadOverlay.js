// Styles
import styles from './../styles/Globals.module.scss'

import { useEffect, useState } from 'react'
import Cookies from 'js-cookie'

const LoadOverlay = ({showLoadOverlay, setShowLoadOverlay}) => {
  const [hasTransition, setHasTransition] = useState(false)
  const [isLargeQuery, setIsLargeQuery] = useState(false)

  useEffect(() => {
    if (typeof window !== "undefined") {
      setIsLargeQuery(window.matchMedia( '(min-width: 992px)' ).matches)
    }
  }, [])

  const toggleOff = () => {
    setHasTransition(true)
    setShowLoadOverlay(false)
    Cookies.set('slumbr-party-splash', 'true', { expires: .5 })

    if (document !== undefined) {
      document.body.style.overflow = 'initial'
    }
  }

  return (
    <div
      onClick={() => toggleOff()}
      onWheel={() => toggleOff()}
      className={`${styles['load-overlay']} ${showLoadOverlay ? styles.open : null} absolute top-0 left-0 w-full h-full flex justify-center items-start`}
      style={{
        transition: hasTransition ? 'opacity .6s' : 'none'
      }}
    >
      <svg viewBox="0 0 1418 865" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_b_231_2731)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M0 20C0 8.95433 8.9543 0 20 0H1398C1409.05 0 1418 8.9543 1418 20V845C1418 856.046 1409.05 865 1398 865H20C8.9543 865 0 856.046 0 845V20ZM9.7166 585.76H9.48619V517.307C9.48619 498.155 16.7903 493.551 26.3641 493.551C37.6151 493.551 58.6623 499.429 81.8443 505.904L81.8447 505.904C110.031 513.776 141.373 522.53 162.101 522.671H163.357C198.104 522.671 219.267 508.368 219.267 480.521C219.267 460.598 202.643 448.854 181.744 448.854C170.915 448.854 159.336 452.944 147.24 460.095L125.834 472.61C113.495 479.762 96.871 484.611 81.0069 484.611C35.6728 484.611 8.23043 456.508 8.23043 408.75C8.23043 360.991 44.7397 332.888 87.5507 332.888C111.479 332.888 135.396 339.268 156.548 348.219L180.465 358.175C183.25 359.306 185.984 360.453 188.651 361.573C200.462 366.531 210.984 370.947 218.991 370.947C230.581 370.947 236.364 363.282 236.364 353.069C236.364 345.917 234.348 341.068 230.316 333.145L230.823 332.888C246.433 354.857 256.26 372.478 256.26 389.34V392.402C254.498 412.84 240.396 427.142 221.756 427.142C213.634 427.142 197.579 422.052 179.525 416.328L179.525 416.327C156.141 408.913 129.406 400.436 112.217 400.582C78.7258 400.839 58.5761 413.868 58.5761 440.686C58.5761 463.169 75.6959 476.7 95.3387 476.7C105.166 476.7 115.489 473.639 125.558 467.761L152.505 451.927C169.878 441.714 184.486 438.384 197.078 438.384C232.585 438.384 257.516 462.14 257.516 502.747C257.516 554.338 217.47 585.76 166.099 585.76C145.793 585.76 119.741 576.829 95.6446 568.569C74.9141 561.462 55.6313 554.852 42.7005 554.852C20.788 554.852 11.7212 567.367 9.7166 585.76ZM143.035 778.581C140.27 778.581 135.235 776.793 128.691 773.731V773.72C140.016 754.065 147.562 728.041 147.562 699.447C147.562 643.042 112.078 600.413 63.7604 600.413C42.8733 600.413 20.9839 608.067 9.15207 618.28V707.615H9.65899C25.765 683.625 51.9286 672.138 79.6129 672.138C115.097 672.138 134.728 697.414 134.728 732.634C134.728 744.378 131.456 758.926 124.659 771.686C112.632 765.875 96.8165 757.003 81.0632 748.165C54.6241 733.333 28.3604 718.599 20.477 718.599C12.1705 718.599 9.15207 723.192 9.15207 731.862V822.226C9.15207 839.333 15.4424 850.563 29.5323 850.563C50.9263 850.563 79.1175 833.467 95.9724 814.829C113.588 824.528 133.472 837.031 155.869 851.836H156.376V749.998C165.442 779.597 187.332 796.448 209.728 796.448C238.161 796.448 255.777 776.793 255.777 726.253V694.095C255.777 643.556 193.369 613.174 153.104 599.14H152.597V764.546C152.597 773.731 150.834 778.581 143.035 778.581ZM92.1936 812.784C80.1198 819.924 61.7442 824.013 41.1106 824.013V824.002C24.2558 824.002 12.9309 817.364 12.9309 805.118C12.9309 796.19 20.2235 790.827 30.2926 790.827C44.6359 790.827 65.2696 798.493 92.1936 812.784ZM251.986 726.253C251.986 738.254 243.438 745.908 215.5 745.908C186.56 745.908 156.364 730.086 156.364 692.822V675.971C195.869 683.882 251.986 699.202 251.986 726.253Z" fill="#6944FF"/>
        </g>
        <defs>
          <filter id="filter0_b_231_2731" x="-20" y="-20" width="1458" height="905" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feGaussianBlur in="BackgroundImageFix" stdDeviation="10"/>
          <feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_231_2731"/>
          <feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_231_2731" result="shape"/>
          </filter>
        </defs>
        </svg>
    </div>
  )
}

export default LoadOverlay